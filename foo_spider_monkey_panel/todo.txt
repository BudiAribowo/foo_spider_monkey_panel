# Current
- Fix script reload from Preferences>CUI.
- Allow to configure max component RAM usage via preferences.
- Add one-use only DefinePanel(name, author, [options]) method somewhere (global, utils, window?)
- 'Shell.Application': https://github.com/Microsoft/VCSamples/blob/feeab9bc32c5c38b76b5b3f5dec15a376492a1ab/VC2008Samples/MFC/ole/oleview/iviewers/tree.cpp#L868.
- 'WScript.Shell': test after applying the fix for inherited interfaces from above.
- Change stats field names: https://github.com/TheQwertiest/foo-jscript-panel/commit/57393822ae42e1ebd77911c0f934471903975b4e#commitcomment-29629263
- Rewrite ActiveXObject properly (and rename the files as well). Reimplement accessors through proxy instead of current hacks.
- Reimplement drag-n-drop.
- Add a header with component name and version to error repoerter.
- Reuse updated encoding handling code in ReadFile.
- Remove engine settings from Panel Properties dialog.
- Create patches for pfc, columns-ui and fb2k sdk.
- Complete rebranding to spider_monkey_panel.
- Check and fix all the samples.
- Beta-test?
- Stop staying up all night making this...

# Prerelease-Test
- Test `include` with various codepages (esp. JP,KR,CH).
- Check utf8 literals everywhere (paths, script window, script files, properties, callback arguments)
- Check drag-n-drop functionality.
- Check that all files are correctly parsed: UTF8, UTF8-BOM, ASCII.
- Check that it can work side-by-side with foo-jscript-panel.
- Profile CPU usage and check if there are any bottlenecks (note: pfc utf8<>wide is much slower than WinAPI WideCharToMultiByte equivalent)
- Make sure there are no memory leaks.

# Prerelease-Doc
- Document new features: ES6, ES2016, ES2017 (with links to feature breakdown), possible ESNext in the future, global.include(), performance.
- Document that Dispose() and toArray() methods are not needed anymore.
- Document FbHandleList.Item removal ([] proxy)
- Document that everything is case-sensitive (unlike how it was in WSH\IE...)
- Document discontinued support for WinXP and Vista (i.e. only Win7 and above).
- Copy and update marc2003's wiki.
- Create a simple JSP > SMP script migration guide.
- Create a building guide for devs.
- Update docs.
- Check all TODOs.

# Planned
- Fix unresponsive arrow keys in DUI in CaTRoX (present in jscript as well).
- Replace `Create*` interface methods with prototypes and `new` where possible
- Try to make it work with paths containing cyrillics and other exotic characters
- Move setInterval and friends to global namespace.
- Port hacks from ui_hacks and wsh_mod.
- Add ES6 modules support (`import`).
- Replace PropertyList with something more maintenable.
- Save Panel Properties dialog size between calls.
- Add array conversion support in ActiveXObject.
- See if it's possible to export some common Array checking/creating/parsing code.
- Update Brett's JS smooth playlist.
- Add support for more UTF encodings when reading scripts and files (UTF16BE, UTF32LE, UTF32BE).
- Add a custom message support to profiler.
- Add W3C specified printf-lile behaviour to console.log.
- Add font caching (check if it's not handled by the system already though).
- Split stackblur and kmeans into .cpp and .h.
- Run a static analysis on the code (cppcheck? pvs? VS build-in?).
- Change the limit of JS heap according to available RAM on system (1gb heap size with only 2gb RAM is brutal).

# Maybe
- Follow the bug https://bugzilla.mozilla.org/show_bug.cgi?id=1474914 , if fixed consider moving to newer non-ESR branches.
- Replace in-repository scintilla with it's submodule.
- Update scintilla to the latest version.
- Update scintilla JS keywords list.
- Replace in-repository wtl with it's submodule.
- Raise warning level to W4 or WALL with WERROR.
- Some sort of build system?
- Add help to properties and methods (JS_DefineFunctionsWithHelp)
- Investigate: separate native JSON parser vs one from SpiderMonkey engine.
- Minimal .js tests for all the functionality: might be possible to cycle them in GUI via include().