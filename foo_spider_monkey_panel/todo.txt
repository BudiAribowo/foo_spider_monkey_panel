# Current
- Fix unresponsive arrow keys in some scripts (mb smth with focus?).
- Reimplement all object creation code through prototypes, since JS_DefineProperties and JS_DefineFunctions are very expensive.
- 'Shell.Application': use through ActiveXObject, manual linking is possible (shell32.lib, Shldisp.idl, Shldisp.h), 
- 'WScript.Shell': new `utils` methods? Run, RegRead, maybe RegWrite.
- See todo in FbMetadbHandleList about collisions (probably can be reproduced by returning nullptr from Create).
- Change scintilla classname: https://github.com/TheQwertiest/foo-jscript-panel/commit/57393822ae42e1ebd77911c0f934471903975b4e#commitcomment-29624489
- Change stats field names: https://github.com/TheQwertiest/foo-jscript-panel/commit/57393822ae42e1ebd77911c0f934471903975b4e#commitcomment-29629263
- Reimplement ActiveXObject accessors through proxy instead of current hacks.
- Move all failable initialization from ctor to PostCreate.
- Rework GC.
- Rewrite ActiveXObject properly (and rename the files as well).
- Remove engine settings from Panel Properties dialog.
- Complete rebranding to spider_monkey_panel.
- Why is this list getting longer, instead of shorter?!
- Stop staying up all night making this...

# Prerelease
- Test `include` with various codepages (esp. JP,KR,CH).
- Check utf8 literals everywhere (paths, script window, script files, properties, callback arguments)
- Check drag-n-drop functionality.
- Check that all files are correctly parsed: UTF8, UTF8-BOM, ASCII.
- Check that it can work side-by-side with foo-jscript-panel.
- Test if JS_ShutDown deadlock on fb2k exit is fixed.
- Profile CPU usage and check if there are any bottlenecks (pfc utf8<>wide is much slower than WinAPI WideCharToMultiByte equivalent)
- Make sure there are no memory leaks.
- Document that toArray() methods are not needed anymore.
- Document FbHandleList.Item removal ([] proxy)
- Document that everything is case-sensitive (unlike how it was in WSH\IE...)
- Create a simple JSP > SMP script migration guide.
- Update docs.
- Check all TODOs.

# Planned
- Replace `Create*` interface methods with prototypes and `new` where possible
- Try to make it work with paths containing cyrillics and other exotic characters
- Move setInterval and co to global namespace.
- Port hacks from ui_hacks.
- Add ES6 modules support (`import`).
- Replace PropertyList with something more maintenable.
- Save Panel Properties dialog size between calls.
- Add array conversion support in ActiveXObject.
- See if it's possible to export some common Array checking/creating/parsing code.

# Maybe
- Follow the bug https://bugzilla.mozilla.org/show_bug.cgi?id=1474914 , if fixed consider moving to newer branches.
- Replace in-repository scintilla with it's submodule.
- Update scintilla to the latest version.
- Update scintilla JS keywords list
- Replace in-repository wtl with it's submodule.
- Raise warning level to W4 or WALL with WERROR
- Add help to properties and methods (JS_DefineFunctionsWithHelp)
- Investigate: separate native JSON parser vs one from SpiderMonkey engine.
- Minimal .js tests for all the functionality.